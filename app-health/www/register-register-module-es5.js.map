{"version":3,"sources":["src/app/register/register.component.html","src/app/register/register.component.scss","src/app/register/register.component.ts","src/app/register/register.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar class=\\\"header-app\\\">\\n        <ion-title i18n=\\\"@@headerTitle\\\"><span class=\\\"supertitle\\\">Luchemos juntos contra el</span><br /> CORONAVIRUS</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <ion-grid>\\n        <ion-row>\\n            <ion-col>\\n                <div class=\\\"form-row\\\">\\n                    <h1 i18n=\\\"@@registerTitle\\\">Registro</h1>\\n                </div>\\n                <form [formGroup]=\\\"registerPatientForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n                    <patient-info-form #patientInfoFormComponent></patient-info-form>\\n                    <div class=\\\"form-row\\\">\\n                        <div class=\\\"form-group form-check\\\">\\n                            <input formControlName=\\\"acceptterms\\\" name=\\\"acceptterms\\\" class=\\\"form-check-input\\\" id=\\\"acceptterms\\\" type=\\\"checkbox\\\">\\n                            <label for=\\\"acceptterms\\\" i18n=\\\"@@accepttermsLabel\\\">Acepto las condiciones de uso y políticas de privacidad</label>\\n                            <small class=\\\"error\\\" *ngIf=\\\"acceptterms.invalid && formTriedToSubmit\\\" i18n=\\\"@@accepttermsError\\\">Por favor, debes aceptar las condiciones de uso y la política de privacidad.</small>\\n                        </div>\\n                    </div>\\n                    <ion-button type=\\\"submit\\\" color=\\\"dark\\\" expand=\\\"block\\\" i18n=\\\"@@registerSubmitButton\\\">REGISTRARSE</ion-button>\\n                    <div class=\\\"d-none d-lg-block d-lg-flex justify-content-end\\\">\\n                        <div>\\n                            <small class=\\\"error\\\" *ngIf=\\\"(!patientInfoFormComponent.isValid || acceptterms.invalid) && formTriedToSubmit\\\" i18n=\\\"@@registerFormError\\\">\\n                                Ups! Te faltan campos por rellenar <span class=\\\"emoji-thinking-face\\\"></span>\\n                            </small>\\n                        </div>\\n                    </div>\\n                </form>\\n            </ion-col>\\n        </ion-row>\\n    </ion-grid>\\n</ion-content>\\n\"","export default \".supertitle {\\n  font-size: 14px;\\n  font-weight: 300;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9vcmRhcy93d3cvY29yb25hdmlydXMtYXBwLXJlYWwvYXBwLXBvbGljZS9zcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc3VwZXJ0aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZm9udC13ZWlnaHQ6IDMwMDtcbn1cbiIsIi5zdXBlcnRpdGxlIHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LXdlaWdodDogMzAwO1xufSJdfQ== */\"","import {Component, ViewChild} from '@angular/core';\nimport {PatientInfoFormComponent} from '../shared/patient-info-form/patient-info-form.component';\nimport {PatientService} from '../shared/services/patient.service';\nimport {Router} from '@angular/router';\nimport {Patient, PatientWithRelations} from '../shared/sdk';\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {LoadingController} from '@ionic/angular';\n\n@Component({\n    selector: 'register',\n    templateUrl: 'register.component.html',\n    styleUrls: ['register.component.scss']\n})\nexport class RegisterComponent {\n\n    @ViewChild('patientInfoFormComponent', {static: true}) protected patientInfoFormComponent: PatientInfoFormComponent;\n\n    protected patient: PatientWithRelations;\n    public registerPatientForm: FormGroup;\n\n    get acceptterms() { return this.registerPatientForm.get('acceptterms'); }\n\n    protected accepttermsValuer: boolean;\n\n    public formTriedToSubmit: boolean = false;\n\n    constructor(protected formBuilder: FormBuilder,\n                protected patientService: PatientService,\n                public loadingController: LoadingController,\n                protected router: Router) {\n        this.registerPatientForm = this.formBuilder.group({\n            acceptterms: new FormControl(this.accepttermsValuer, [Validators.requiredTrue ])\n        });\n    }\n\n    public onSubmit() {\n        this.formTriedToSubmit = true;\n        this.patientInfoFormComponent.validate();\n        if(this.registerPatientForm.valid && this.patientInfoFormComponent.isValid) {\n            this.register();\n        }\n    }\n\n    async register() {\n\n        if(this.patientInfoFormComponent.isValid) {\n\n            const loading = await this.loadingController.create({\n                message: 'Por favor, espere...'\n            });\n            await loading.present();\n\n            this.patient = this.patientInfoFormComponent.patient;\n            this.patientService.register(this.patient).subscribe(newPatient => {\n                loading.dismiss();\n                if(newPatient != null && newPatient != false) {\n                    this.router.navigate(['/app/home']);\n                }\n                else {\n                    //go to error page\n                    this.router.navigate(['/no-access']);\n                }\n            })\n\n        }\n    }\n\n    async presentLoading() {\n        const loading = await this.loadingController.create({\n            message: 'Por favor, espere...',\n            duration: 2000\n        });\n        await loading.present();\n\n        const { role, data } = await loading.onDidDismiss();\n        console.log('Loading dismissed!');\n    }\n\n}\n","import {IonicModule} from '@ionic/angular';\nimport {RouterModule} from '@angular/router';\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {RegisterComponent} from './register.component';\nimport {PatientInfoFormModule} from '../shared/patient-info-form/patient-info-form.module';\n\n@NgModule({\n    imports: [\n        IonicModule,\n        CommonModule,\n        PatientInfoFormModule,\n        FormsModule,\n        ReactiveFormsModule,\n        RouterModule.forChild([{ path: '', component: RegisterComponent }])\n    ],\n    declarations: [RegisterComponent]\n})\nexport class RegisterModule {}\n"],"sourceRoot":"webpack:///","file":"register-register-module-es5.js"}