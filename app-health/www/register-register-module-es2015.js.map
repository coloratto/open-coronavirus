{"version":3,"sources":["./src/app/register/register.component.html","./src/app/register/register.component.scss","./src/app/register/register.component.ts","./src/app/register/register.module.ts"],"names":[],"mappings":"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","file":"register-register-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar class=\\\"header-app\\\">\\n        <ion-title i18n=\\\"@@headerTitle\\\"><span class=\\\"supertitle\\\">Luchemos juntos contra el</span><br /> CORONAVIRUS</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <ion-grid>\\n        <ion-row>\\n            <ion-col>\\n                <div class=\\\"form-row\\\">\\n                    <h1 i18n=\\\"@@registerTitle\\\">Registro</h1>\\n                </div>\\n                <form [formGroup]=\\\"registerPatientForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n                    <patient-info-form #patientInfoFormComponent></patient-info-form>\\n                    <div class=\\\"form-row\\\">\\n                        <div class=\\\"form-group form-check\\\">\\n                            <input formControlName=\\\"acceptterms\\\" name=\\\"acceptterms\\\" class=\\\"form-check-input\\\" id=\\\"acceptterms\\\" type=\\\"checkbox\\\">\\n                            <label for=\\\"acceptterms\\\" i18n=\\\"@@accepttermsLabel\\\">Acepto las condiciones de uso y políticas de privacidad</label>\\n                            <small class=\\\"error\\\" *ngIf=\\\"acceptterms.invalid && formTriedToSubmit\\\" i18n=\\\"@@accepttermsError\\\">Por favor, debes aceptar las condiciones de uso y la política de privacidad.</small>\\n                        </div>\\n                    </div>\\n                    <ion-button type=\\\"submit\\\" color=\\\"dark\\\" expand=\\\"block\\\" i18n=\\\"@@registerSubmitButton\\\">REGISTRARSE</ion-button>\\n                    <div class=\\\"d-none d-lg-block d-lg-flex justify-content-end\\\">\\n                        <div>\\n                            <small class=\\\"error\\\" *ngIf=\\\"(!patientInfoFormComponent.isValid || acceptterms.invalid) && formTriedToSubmit\\\" i18n=\\\"@@registerFormError\\\">\\n                                Ups! Te faltan campos por rellenar <span class=\\\"emoji-thinking-face\\\"></span>\\n                            </small>\\n                        </div>\\n                    </div>\\n                </form>\\n            </ion-col>\\n        </ion-row>\\n    </ion-grid>\\n</ion-content>\\n\"","export default \".supertitle {\\n  font-size: 14px;\\n  font-weight: 300;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9vcmRhcy93d3cvY29yb25hdmlydXMtYXBwLXJlYWwvYXBwLXBvbGljZS9zcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc3VwZXJ0aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZm9udC13ZWlnaHQ6IDMwMDtcbn1cbiIsIi5zdXBlcnRpdGxlIHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LXdlaWdodDogMzAwO1xufSJdfQ== */\"","import {Component, ViewChild} from '@angular/core';\nimport {PatientInfoFormComponent} from '../shared/patient-info-form/patient-info-form.component';\nimport {PatientService} from '../shared/services/patient.service';\nimport {Router} from '@angular/router';\nimport {Patient, PatientWithRelations} from '../shared/sdk';\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {LoadingController} from '@ionic/angular';\n\n@Component({\n    selector: 'register',\n    templateUrl: 'register.component.html',\n    styleUrls: ['register.component.scss']\n})\nexport class RegisterComponent {\n\n    @ViewChild('patientInfoFormComponent', {static: true}) protected patientInfoFormComponent: PatientInfoFormComponent;\n\n    protected patient: PatientWithRelations;\n    public registerPatientForm: FormGroup;\n\n    get acceptterms() { return this.registerPatientForm.get('acceptterms'); }\n\n    protected accepttermsValuer: boolean;\n\n    public formTriedToSubmit: boolean = false;\n\n    constructor(protected formBuilder: FormBuilder,\n                protected patientService: PatientService,\n                public loadingController: LoadingController,\n                protected router: Router) {\n        this.registerPatientForm = this.formBuilder.group({\n            acceptterms: new FormControl(this.accepttermsValuer, [Validators.requiredTrue ])\n        });\n    }\n\n    public onSubmit() {\n        this.formTriedToSubmit = true;\n        this.patientInfoFormComponent.validate();\n        if(this.registerPatientForm.valid && this.patientInfoFormComponent.isValid) {\n            this.register();\n        }\n    }\n\n    async register() {\n\n        if(this.patientInfoFormComponent.isValid) {\n\n            const loading = await this.loadingController.create({\n                message: 'Por favor, espere...'\n            });\n            await loading.present();\n\n            this.patient = this.patientInfoFormComponent.patient;\n            this.patientService.register(this.patient).subscribe(newPatient => {\n                loading.dismiss();\n                if(newPatient != null && newPatient != false) {\n                    this.router.navigate(['/app/home']);\n                }\n                else {\n                    //go to error page\n                    this.router.navigate(['/no-access']);\n                }\n            })\n\n        }\n    }\n\n    async presentLoading() {\n        const loading = await this.loadingController.create({\n            message: 'Por favor, espere...',\n            duration: 2000\n        });\n        await loading.present();\n\n        const { role, data } = await loading.onDidDismiss();\n        console.log('Loading dismissed!');\n    }\n\n}\n","import {IonicModule} from '@ionic/angular';\nimport {RouterModule} from '@angular/router';\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {RegisterComponent} from './register.component';\nimport {PatientInfoFormModule} from '../shared/patient-info-form/patient-info-form.module';\n\n@NgModule({\n    imports: [\n        IonicModule,\n        CommonModule,\n        PatientInfoFormModule,\n        FormsModule,\n        ReactiveFormsModule,\n        RouterModule.forChild([{ path: '', component: RegisterComponent }])\n    ],\n    declarations: [RegisterComponent]\n})\nexport class RegisterModule {}\n"],"sourceRoot":"webpack:///"}